hostname {{ hostname }}

{% for feature in features %}
  {{- feature }}
{% endfor %}

!TODO: QoS

snmp-server user admin network-admin auth md5 -- priv -- localizedkey
snmp-server host 10.1.1.40 traps version 2c public udp-port 2162
!snmp-server community -- group network-operator
!snmp-server community -- use-acl acl_for_ro_comm
ntp server 10.1.1.1 prefer use-vrf management
ntp server 10.1.1.2 use-vrf management
ntp source-interface  mgmt0
vrf context management
  ip route 0.0.0.0/0 10.1.1.1

!VLAN Database
{% for key, value in vlanDict.iteritems() -%}
vlan {{ key }}
  name {{ value }}
{% endfor %}

!VSAN Database
vsan database
{% for key, value in vsanDict.iteritems() -%}
  vsan {{ key }} name {{ value }}
{% endfor %} 

spanning-tree domain 101
spanning-tree vlan 1-610,612-3967,4048-4093 priority 8192
spanning-tree vlan 611 priority 61440
vpc domain 101
  role priority 8192
  system-priority 8192
  peer-keepalive destination 10.1.1.2 source 10.1.1.1
  delay restore 180
  auto-recovery
  fabricpath switch-id 101
port-profile default max-ports 512

device-alias database
{% for key, value in initDict.iteritems()  %}
  device-alias name {{ value }} pwwn {{ key }}
{% endfor %}
{% for key, value in targetDict.iteritems()  %}
  device-alias name {{ value }} pwwn {{ key }}
{% endfor %}
device-alias commit

!TODO: vints

!TODO: pints

{% for int in pints %}
interface Ethernet{{ int.slotid }}/{{ int.portid }}
  description {{ int.description }}
  switchport mode {{ int.switchportMode }}
  {% if int.switchportMode == "trunk" -%}
  switchport trunk allowed vlan {{ int.allowedVlans }}
  {% else %}
  switchport access vlan {{ int.accessVlan }}
  {% endif %}
  {% if not int.channelGroup == 0 -%}
  channel-group {{ int.channelGroup }} mode active
  {% endif %}
{% endfor %}

!ZONING CONFIG
{% for key, value in initDict.iteritems()  %}
zone name {{ value }} vsan 321
  member pwwn {{ key }}
  {% for key2, value2 in targetDict.iteritems()  -%}
    member pwwn {{ key2 }}
  {% endfor %}
{% endfor %}

zoneset name ZONESET_VSAN_235 vsan 235
{% for key, value in initDict.iteritems()  %}
  member {{ value }}
{% endfor %}

zoneset activate name ZONESET_VSAN_235 vsan 2



